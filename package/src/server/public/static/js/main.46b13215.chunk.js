(this.webpackJsonpwebsite=this.webpackJsonpwebsite||[]).push([[0],{137:function(e,t,n){},163:function(e,t,n){},165:function(e,t,n){"use strict";n.r(t);var i,a=n(0),r=n.n(a),s=n(14),c=n.n(s),o=n(16),l=n(15),d=n(21),u=n(20),h=(n(137),n(44)),b=n(216),j=n(207),v=n(210),m=n(168),f=n(218),p=n.p+"static/media/elabLogo.6161d4d0.svg",g=n(7),O=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e={padding:"2vh 0.5vw"};return Object(g.jsx)(j.a,{position:"static",children:Object(g.jsxs)(v.a,{children:[Object(g.jsx)("div",{style:e,children:Object(g.jsx)(m.a,{variant:"h4",style:{paddingLeft:"10vw",paddingRight:"0.2vw"},children:Object(g.jsx)(f.a,{fontWeight:"fontWeightBold",children:"Limes Portal"})})}),Object(g.jsx)("img",{src:p,alt:"eLab",height:"40vw",width:"40vw"}),Object(g.jsx)("div",{style:e,children:Object(g.jsx)(m.a,{variant:"subtitle1",children:"Powered by eLab"})})]})})}}]),n}(r.a.Component),y=n(6),x=n(219),k=n(211),C=n(212),S=n(85),w=n(51),P=n(215),L=n(171),D=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(o.a)(this,n),(i=t.call(this,e)).passwordRef=void 0,i.loginRef=void 0,i.defaultLabel="",i.elabService=void 0,i.state={username:"",password:"",open:!0,error:!1,label:i.defaultLabel,loading:!1,tried:!1},i.elabService=e.elabService,i}return Object(l.a)(n,[{key:"loginFailed",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setState({error:!0,label:e,loading:!1,tried:t})}},{key:"loginSuccess",value:function(){this.setState({open:!1,loading:!1,tried:!1})}},{key:"login",value:function(){var e=this;this.state.tried||(this.setState({label:"",loading:!0}),this.state.username&&this.state.password?this.elabService.Login(this.state.username,this.state.password).then((function(t){var n=Object(y.a)(t,2),i=n[0],a=n[1];i?e.loginSuccess():e.loginFailed(a)})).catch((function(t){console.error(t),e.loginFailed("string"===typeof t?t:"No response. Are you on the UBC network?",!1)})):this.loginFailed("fields cannot be empty"))}},{key:"onClose",value:function(){}},{key:"render",value:function(){var e=this,t={},n={width:"100%",marginBottom:"1em"},i=[{name:"username",label:"Username",placeholder:"username",onchange:function(t){e.setState({error:!1,tried:!1,username:t.target.value})}},{name:"password",label:"Password",placeholder:"*****",type:"password",onchange:function(t){e.setState({error:!1,tried:!1,password:t.target.value})},onkeydown:function(t){var n;"Enter"===t.key&&(null===(n=e.loginRef)||void 0===n||n.focus())}}];return Object(g.jsx)(x.a,{open:this.state.open,onClose:this.onClose,style:{},children:Object(g.jsx)(k.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{outline:"transparent",height:"100%"},children:Object(g.jsx)(C.a,{style:{outline:"transparent",padding:"1em 2em 1.2em 2em",width:"25em"},children:Object(g.jsxs)(k.a,{container:!0,justify:"center",direction:"column",style:{},spacing:0,children:[Object(g.jsx)(m.a,{variant:"h5",component:"h2",align:"center",style:t,children:"Login"}),Object(g.jsx)(m.a,{variant:"subtitle1",align:"center",color:"error",style:t,children:this.state.label}),Object(g.jsx)(k.a,{item:!0,container:!0,justifyContent:"center",direction:"column",children:Object(g.jsx)("form",{children:i.map((function(t){return Object(g.jsx)(k.a,{item:!0,children:Object(g.jsx)(S.a,{label:t.label,name:t.name,placeholder:t.placeholder,style:n,type:t.type,error:e.state.error,onChange:t.onchange,onKeyDown:t.onkeydown})},t.name)}))})}),Object(g.jsx)(k.a,{container:!0,justify:"center",children:Object(g.jsxs)(w.a,{variant:"contained",color:"primary",style:{width:"10em"},disabled:this.state.loading,onClick:function(){e.login()},ref:function(t){e.loginRef=t},children:["Login",Object(g.jsx)(P.a,{in:this.state.loading,children:Object(g.jsx)(L.a,{size:20,thickness:5,style:{position:"absolute"}})})]})})]})})})})}}]),n}(r.a.Component),A=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return n}(D),I=A,T=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var i;Object(o.a)(this,n),(i=t.call(this,e)).mainText=void 0,i.onClick=void 0,i.settings=void 0;var a=e.settings;return i.settings=e.settings,i.mainText=a.name,i.state={disabled:a.disabled,cardStyle:{width:"200px",height:"200px",border:"2px solid transparent",background:a.disabled?"lightgrey":"",cursor:a.disabled?"":"pointer"}},i.onClick=e.onClick,i}return Object(l.a)(n,[{key:"onHover",value:function(){if(!this.state.disabled){var e={};Object.assign(e,this.state.cardStyle),e.border="2px solid ".concat(this.props.theme.palette.primary.main),this.setState({cardStyle:e})}}},{key:"onLeave",value:function(){if(!this.state.disabled){var e={};Object.assign(e,this.state.cardStyle),e.border="2px solid transparent",this.setState({cardStyle:e})}}},{key:"render",value:function(){var e=this;return Object(g.jsx)(C.a,{style:this.state.cardStyle,onClick:this.state.disabled?function(){}:function(){return e.onClick(e.settings)},onMouseEnter:function(){e.onHover()},onMouseLeave:function(){e.onLeave()},children:Object(g.jsx)(k.a,{container:!0,spacing:0,justifyContent:"center",alignItems:"center",direction:"column",style:{height:"100%"},children:Object(g.jsx)(k.a,{item:!0,children:Object(g.jsx)(m.a,{variant:"h5",component:"h2",children:this.mainText})})})})}}]),n}(r.a.Component),E=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(o.a)(this,n),(i=t.call(this,e)).cardClicked=void 0,i.state={functions:e.functions},i.cardClicked=e.clicked,i}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(g.jsx)(k.a,{style:{marginTop:"10vh"},children:Object(g.jsx)(k.a,{container:!0,justifyContent:"center",spacing:5,children:this.state.functions.map((function(t){return Object(g.jsx)(k.a,{item:!0,children:Object(g.jsx)(T,{theme:e.props.theme,settings:t,onClick:e.cardClicked})},t.name)}))})})}}]),n}(r.a.Component),U=n(217),N=n(108);!function(e){e.SAMPLE="Sample",e.STORAGE_LOCATION="Location",e.CUSTOM="Unknown"}(i||(i={}));var R=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(o.a)(this,n),(i=t.call(this,e)).elabService=void 0,i.UPDATE_DELAY=650,i.elabService=e.elabService,i.state={labels:[],labelsRaw:"",printDisabled:!0,printAllDisabled:!1,lastChange:Date.now(),sendingPrint:!1,gettingData:!1},i}return Object(l.a)(n,[{key:"parseLabels",value:function(){var e=this,t=this.state.labelsRaw.split("\n"),n=function(e){return!/[^0-9]/.test(e)},a=(t.map(n),t.filter(n));this.elabService.BarcodeLookup(a).then((function(a){var r=t.map((function(e){if(void 0==a[e]){var t=e.split(" "),r={id:"",name:"",type:i.CUSTOM};if(t.length>1&&n(t[0])){var s=t.shift();r.id=s||"",r.name=t.join(" ")}else r.id="",r.name=e;return r}var c=a[e];return{id:"...".concat(e.substring(10)),name:c.name,type:c.sampleID?i.SAMPLE:i.STORAGE_LOCATION}}));e.setState({labels:r})})).catch((function(e){console.error(e)})).finally((function(){e.setState({gettingData:!1})})),this.setState({gettingData:!0})}},{key:"onLabelInputChanged",value:function(e){var t=this,n=e.target.value;this.setState({labelsRaw:n,lastChange:Date.now()}),setTimeout((function(){Date.now()-t.state.lastChange>=t.UPDATE_DELAY&&t.parseLabels()}),this.UPDATE_DELAY)}},{key:"onPrint",value:function(){}},{key:"onPrintAll",value:function(){console.log(this.state.labelsRaw)}},{key:"render",value:function(){var e=this,t={margin:"0 1em 0 1em"},n=["box 23","005000000123456","..."].join("\n");return Object(g.jsx)(k.a,{container:!0,justifyContent:"center",style:{marginTop:"5vh",justifyContent:"center",alignItems:"center",alignContent:"center"},children:Object(g.jsx)(C.a,{style:{padding:"2em"},children:Object(g.jsxs)(k.a,{container:!0,direction:"column",spacing:3,children:[Object(g.jsx)(k.a,{item:!0,children:Object(g.jsx)(m.a,{variant:"h5",component:"h2",align:"left",gutterBottom:!0,style:{},children:"Print Labels"})}),Object(g.jsx)(k.a,{item:!0,children:Object(g.jsx)(S.a,{label:"Items",placeholder:n,multiline:!0,variant:"outlined",style:{width:"70em"},onChange:function(t){e.onLabelInputChanged(t)}})}),Object(g.jsxs)(k.a,{item:!0,style:{height:"30em"},justify:"center",children:[Object(g.jsx)(P.a,{in:this.state.gettingData,style:{position:"absolute",marginTop:"5em"},children:Object(g.jsx)(L.a,{size:50})}),Object(g.jsx)(N.a,{rows:this.state.labels,columns:[{field:"disabled",hide:!0},{field:"id",headerName:"Barcode",width:100,sortable:!1},{field:"name",headerName:"Name",width:400,sortable:!1},{field:"type",headerName:"Type",width:100,sortable:!1}],rowsPerPageOptions:[100],onPageSizeChange:function(){},isRowSelectable:function(e){return!e.row.disabled},checkboxSelection:!0,disableSelectionOnClick:!0,disableColumnMenu:!0,disableColumnFilter:!0,disableColumnSelector:!0,style:{opacity:this.state.gettingData?.25:1}}),Object(g.jsx)(k.a,{item:!0,children:Object(g.jsx)(P.a,{in:this.state.sendingPrint,children:Object(g.jsx)(U.a,{})})})]}),Object(g.jsxs)(k.a,{item:!0,children:[Object(g.jsx)(w.a,{variant:"contained",color:"primary",disabled:this.state.printDisabled,style:t,onClick:function(){return e.onPrint()},children:"Print"}),Object(g.jsx)(w.a,{variant:"contained",color:"primary",disabled:this.state.printAllDisabled,style:t,onClick:function(){return e.onPrintAll()},children:"Print All"})]})]})})})}}]),n}(r.a.Component),B=n(110),F=n.n(B),M=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Object(o.a)(this,e),this.baseUrl=void 0,this.requester=void 0,this.baseUrl=t,this.requester=F.a}return Object(l.a)(e,[{key:"genUrl",value:function(e){var t="".concat(this.baseUrl,"/").concat(e);return t.endsWith("/")?t.substring(0,t.length-1):t}},{key:"POST",value:function(e){var t=e.path,n=void 0===t?"":t,i=e.body,a=void 0===i?{}:i;return this.requester.post(this.genUrl(n),a)}}]),e}(),q=function(){function e(){Object(o.a)(this,e),this.clientID=void 0,this.firstname=void 0,this.lastname=void 0,this.requester=void 0,this.requester=new M("api/d1"),this.clientID="",this.firstname="",this.lastname=""}return Object(l.a)(e,[{key:"makeBody",value:function(e){return e.ClientID=this.clientID,e}},{key:"Login",value:function(e,t){var n=this;return this.requester.POST({path:"login",body:{Username:e,Password:t}}).then((function(e){var t=e.data;switch(t.Code){case 200:return n.clientID=t.ClientID,n.firstname=t.FirstName,n.lastname=t.LastName,[!0,""];case 401:return[!1,"Incorrect username/password"];default:return Promise.reject("Oops, something crashed...")}}))}},{key:"BarcodeLookup",value:function(e){var t=this.makeBody({Barcodes:e});return this.requester.POST({path:"barcodes",body:t}).then((function(e){return e.data.Results}))}}]),e}(),_=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return n}(q),G=function(){function e(){Object(o.a)(this,e)}return Object(l.a)(e,null,[{key:"GetApiService",value:function(){return this.I||(this.I=new _),this.I}}]),e}();G.I=void 0;var z=Object(h.b)({palette:{primary:{main:"#00abab",contrastText:"white"},secondary:{main:"#98ff6d"},contrastThreshold:3,tonalOffset:.2}}),W=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var i;Object(o.a)(this,n),(i=t.call(this,e)).defaultActiveComponent=void 0,i.elabService=void 0,i.elabService=G.GetApiService();var a=function(){return Object(g.jsx)(R,{elabService:i.elabService})},r=[{name:"Print",disabled:!1,makeNextPage:a},{name:"Scanner coming soon!",disabled:!0}];return i.defaultActiveComponent=Object(g.jsx)(E,{theme:z,functions:r,clicked:function(e){return i.toFunctionPage(e)}}),i.state={activeComponent:i.defaultActiveComponent},i}return Object(l.a)(n,[{key:"toFunctionPage",value:function(e){e&&e.makeNextPage&&this.setState({activeComponent:e.makeNextPage()})}},{key:"render",value:function(){return document.getElementById("favicon").href="/forcefavicon",Object(g.jsx)(b.a,{theme:z,children:Object(g.jsxs)("div",{className:"app-container",children:[Object(g.jsx)(O,{}),Object(g.jsx)(I,{elabService:this.elabService}),this.state.activeComponent]})})}}]),n}(r.a.Component);n(163),n(164);c.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(W,{})}),document.getElementById("root"))}},[[165,1,2]]]);
//# sourceMappingURL=main.46b13215.chunk.js.map